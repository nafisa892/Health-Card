<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Digital Health Identity</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>
<body>
  <div class="container">
    <h2>Digital Health Identity</h2>

    <label for="role">Select Role</label>
    <select id="role" onchange="showRoleForm()">
      <option value="">-- Select --</option>
      <option value="patient">Patient</option>
      <option value="doctor">Doctor</option>
      <option value="family">Family Member</option>
      <option value="emergency">Emergency Responder</option>
    </select>

    <form id="healthForm" onsubmit="event.preventDefault(); generateSummary();">
      <div id="formFields" class="hidden">
        <div class="section">
          <label>Full Name</label>
          <input type="text" name="name">
          <label>Date of Birth</label>
          <input type="date" name="dob">
          <label>Gender</label>
          <select name="gender">
            <option>Male</option>
            <option>Female</option>
            <option>Other</option>
          </select>
          <label>Blood Group</label>
          <input type="text" name="blood_group">
        </div>

        <div class="section" id="medicalSection">
          <label>Allergies</label>
          <input type="text" name="allergies">

          <label>Existing Medical Conditions</label>
          <textarea name="conditions"></textarea>

          <label>Emergency Contact Name</label>
          <input type="text" name="emergency_name">
          <label>Emergency Contact Phone</label>
          <input type="text" name="emergency_phone">
          <label>Emergency Contact Relation</label>
          <input type="text" name="emergency_relation">

          <label>Doctor Visit History</label>
          <textarea name="doctor_visits" placeholder="e.g., Dr. Khan, 2025-05-10, Checkup"></textarea>

          <label>Recent Medications</label>
          <textarea name="medications" placeholder="e.g., Crocin, 500mg, 2025-05-11"></textarea>

          <label>Uploaded Tests</label>
          <textarea name="tests" placeholder="e.g., X-ray, 2025-06-01"></textarea>
        </div>

        <button type="submit">Generate Summary</button>
      </div>
    </form>

    <div id="summaryCard" class="summary-card hidden">
      <h3>Health Summary</h3>
      <div id="summaryContent"></div>
    </div>

    <button id="downloadPdf" class="hidden" onclick="downloadPDF()">Download PDF</button>

    <!-- ✅ QR Code Section placed correctly -->
    <div id="qrCodeBox" class="hidden" style="text-align: center; margin-top: 20px;">
      <h4>QR Code</h4>
      <div id="qrcode"></div>
    </div>
  </div>

  <!-- ✅ Your JavaScript file -->
  <script src="script.js"></script>
</body>
</html>
